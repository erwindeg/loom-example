"use strict";let e;Object.defineProperty(exports,"__esModule",{value:!0});const t="marpitSVGPolyfill:setZoomFactor,",o=Symbol(),n=Symbol();function r(e=document){if(e[o])return e[o];let t=!0;const n=()=>{t=!1,delete e[o]};Object.defineProperty(e,o,{configurable:!0,value:n});let r=[],l=!1;(async()=>{try{r=await i()}finally{l=!0}})();const s=()=>{for(const t of r)t({target:e});l&&0===r.length||t&&window.requestAnimationFrame(s)};return s(),n}const i=()=>{const t="Apple Computer, Inc."===navigator.vendor,o=t?[a]:[],n={then:o=>(t?(async()=>{if(void 0===e){const t=document.createElement("canvas");t.width=10,t.height=10;const o=t.getContext("2d"),n=new Image(10,10),r=new Promise((e=>{n.addEventListener("load",(()=>e()))}));n.crossOrigin="anonymous",n.src="data:image/svg+xml;charset=utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2210%22%20height%3D%2210%22%20viewBox%3D%220%200%201%201%22%3E%3CforeignObject%20width%3D%221%22%20height%3D%221%22%20requiredExtensions%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cdiv%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%20style%3D%22width%3A%201px%3B%20height%3A%201px%3B%20background%3A%20red%3B%20position%3A%20relative%22%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fsvg%3E",await r,o.drawImage(n,0,0),e=o.getImageData(5,5,1,1).data[3]<128}return e})().then((e=>{null==o||o(e?[a]:[])})):null==o||o([]),n)};return Object.assign(o,n)};let l,s;function a(e){const o="object"==typeof e&&e.target||document,r="object"==typeof e?e.zoom:e;window[n]||(Object.defineProperty(window,n,{configurable:!0,value:!0}),document.body.style.zoom=1.0001,document.body.offsetHeight,document.body.style.zoom=1,window.addEventListener("message",(({data:e,origin:o})=>{if(o===window.origin)try{if(e&&"string"==typeof e&&e.startsWith(t)){const[,t]=e.split(","),o=Number.parseFloat(t);Number.isNaN(o)||(s=o)}}catch(e){console.error(e)}})));let i=!1;Array.from(o.querySelectorAll("svg[data-marpit-svg]"),(e=>{var t,o,n,a;e.style.transform||(e.style.transform="translateZ(0)");const c=r||s||e.currentScale||1;l!==c&&(l=c,i=c);const d=e.getBoundingClientRect(),{length:g}=e.children;for(let r=0;r<g;r+=1){const i=e.children[r];if(i.getScreenCTM){const e=i.getScreenCTM();if(e){const r=null!==(o=null===(t=i.x)||void 0===t?void 0:t.baseVal.value)&&void 0!==o?o:0,l=null!==(a=null===(n=i.y)||void 0===n?void 0:n.baseVal.value)&&void 0!==a?a:0,s=i.children.length;for(let t=0;t<s;t+=1){const o=i.children[t];if("SECTION"===o.tagName){const{style:t}=o;t.transformOrigin||(t.transformOrigin=`${-r}px ${-l}px`),t.transform=`scale(${c}) matrix(${e.a}, ${e.b}, ${e.c}, ${e.d}, ${e.e-d.left}, ${e.f-d.top}) translateZ(0.0001px)`;break}}}}}})),!1!==i&&Array.from(o.querySelectorAll("iframe"),(({contentWindow:e})=>{null==e||e.postMessage(`${t}${i}`,"null"===window.origin?"*":window.origin)}))}l=1,s=void 0,exports.default=r,exports.observe=r,exports.polyfills=i,exports.webkit=a;
